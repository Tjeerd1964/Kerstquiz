<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Schoondochters Challenge 2025</title>
  <style>
    :root{ font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
    *{ box-sizing:border-box; }
    body{ margin:0; color:#111827; background: radial-gradient(circle at 20% 10%, #fff7e6, #ffeef2 35%, #eef6ff 70%, #f3fff5); }
    .wrap{ max-width: 980px; margin:0 auto; padding: 18px; }
    .card{
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(17,24,39,.12);
      border-radius: 18px;
      padding: 16px;
      box-shadow: 0 14px 40px rgba(0,0,0,.08);
      margin: 12px 0;
      backdrop-filter: blur(6px);
    }
    h1{ margin:0 0 6px; font-size: 22px; }
    h2{ margin:0 0 8px; font-size: 18px; }
    p{ margin:8px 0 0; line-height:1.35; }
    .muted{ color: rgba(17,24,39,.65); font-size: 12px; }
    .row{ display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap; }
    .pill{
      display:inline-flex; gap:10px; align-items:center;
      background: rgba(17,24,39,.05);
      border:1px solid rgba(17,24,39,.10);
      padding: 10px 12px; border-radius: 14px;
      font-weight: 800;
    }
    .digits{ font-weight: 1000; letter-spacing: .18em; }
    .controls{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top: 10px; }
    input{
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(17,24,39,.22);
      background: rgba(255,255,255,.95);
      font-size: 14px;
      min-width: 240px;
      outline: none;
    }
    button{
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(17,24,39,.25);
      background: rgba(255,255,255,.95);
      font-weight: 800;
      cursor: pointer;
    }
    button:hover{ transform: translateY(-1px); }
    button:active{ transform: translateY(0px); }
    button:disabled{ opacity:.5; cursor:not-allowed; transform:none; }
    .ok{ color:#0d7a3a; font-weight: 1000; }
    .bad{ color:#b00020; font-weight: 1000; }

    .tag{
      display:inline-flex; align-items:center; gap:8px;
      font-weight: 1000; font-size: 12px;
      padding: 6px 10px; border-radius: 999px;
      border: 1px solid rgba(17,24,39,.14);
      background: rgba(255,255,255,.8);
    }

    canvas#fx{ position: fixed; inset: 0; pointer-events:none; z-index: 9999; }

    .overlay{
      position: fixed; inset:0; display:none;
      align-items:center; justify-content:center;
      background: rgba(0,0,0,.55);
      z-index: 10000;
    }
    .overlay.show{ display:flex; }
    .modal{
      width: min(820px, calc(100vw - 28px));
      border-radius: 20px;
      background: rgba(255,255,255,.96);
      border: 1px solid rgba(0,0,0,.12);
      box-shadow: 0 18px 60px rgba(0,0,0,.22);
      padding: 18px;
      text-align: center;
    }
    .bigcode{ font-size: 44px; font-weight: 1100; letter-spacing: .18em; margin: 8px 0; }
    .digitsBtn{ min-width: 64px; padding: 12px 0; font-size: 18px; font-weight: 1100; }
    .picked{ font-size: 26px; font-weight: 1100; letter-spacing: .22em; }

    @media (max-width: 420px){
      input{ min-width: 200px; }
      .bigcode{ font-size: 36px; }
    }
  </style>
</head>
<body>
  <!-- VERSION: 2025-12-23 SCHOONDOCHTERS-2690 -->
  <canvas id="fx"></canvas>

  <div class="wrap">
    <div class="card">
      <div class="row">
        <div>
          <h1>ğŸ‘©â€â¤ï¸â€ğŸ‘© Schoondochters Challenge</h1>
          <p>Vier alledaagse puzzels. Elke juiste oplossing geeft Ã©Ã©n cijfer. Verzamel 6 cijfers en zet ze daarna in de juiste volgorde.<br/> Klik op 'Starten' om te beginnen!</p>
        </div>
        <div class="controls">
          <div class="pill"><span class="muted">Verdiende cijfers</span> <span id="earned" class="digits">â€“</span></div>
          <button id="startBtn" type="button"></button>
          <button id="startSoundBtn" type="button">Starten</button>
        </div>
      </div>
    </div>

    <div id="questions"></div>

    <div id="finalCard" class="card" style="display:none;">
      <h2>Finale: zet de cijfers in de juiste volgorde</h2>
      <p>Klik de cijfers hieronder. Jullie gekozen code verschijnt eronder.</p>
      <div id="digitButtons" class="controls"></div>
      <div class="controls">
        <div><strong>Jullie code:</strong> <span id="picked" class="picked"></span></div>
        <button id="resetPick" type="button">Opnieuw</button>
      </div>
      <div id="finalMsg" style="margin-top:10px;"></div>
    </div>
  </div>

  <div id="winOverlay" class="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Gelukt">
      <h1>ğŸ‰ Gelukt, fantastisch meiden! ğŸ‰ </h1>
        <div class="xmasRow">ğŸ„ ğŸ… âœ¨ ğŸ ğŸ”” ğŸ„</div>
      <div class="bigcode">â‚¬ 2.690,00</div>
      <p><h1>Jullie hebben de code gevonden en <br/>
        daarmee elk een bedrag van â‚¬ 2.690,00 gewonnen!</h1></p>
      <br/><br/>
      <p class="muted"> <h3> ğŸ„ ğŸ… âœ¨ Stuur nu direct in Tikkie naar jullie liefste schoonvader ğŸ ğŸ”” ğŸ„</h3> </p>
       <br/><br/>
      <h2><i>"Als je niet kunt delen, kun je ook niet vermenigvuldigen"</i></h2>
      <h4>Practice what you preach!</h4>
    </div>
  </div>

<script>
  // ---- Instellingen ----
  const finalTargetCode = "269000";
  const questions = [
    {
      id:"q1", digit:"2", title:"Keukenlogica",
      prompt:`Hoeveel eieren zitten er in een dozijn?`,
      expected:"12"
    },
    {
      id:"q2", digit:"9", title:"Rekenen",
      prompt:`Hoe vaak kun je 10 van 100 aftrekken?`,
      expected:"1"
    },
    {
      id:"q3", digit:"0", title:"To-do",
      prompt:`Je hebt 5 taken. Je rondt ze allemaal af. Hoeveel openstaande taken blijven over?`,
      expected:"0"
    },
    {
      id:"q4", digit:"6", title:"Huishouden",
      prompt:`In de droger zitten tien paar witte sokken en tien paar zwarte sokken. Hoeveel sokken moet je blindelings pakken om zeker te zijn van een paar met dezelfde kleur?`,
      expected:"3"
    },
     {
      id:"q4", digit:"0", title:"Huishouden",
      prompt:`Drie monteurs stappen een voor een in een lift. Boven stappen ze een na een weer uit de lift. Hoeveel minuten zaten ze in de lift?`,
      expected:"2"
    },
     {
      id:"q4", digit:"0", title:"Huishouden",
      prompt:` Is het legaal voor een man in Nederland om met de zus van zijn weduwe te trouwen? 1-Ja, 2-Nee, 3-Na 6 maanden`,
      expected:"2"
    },


    Is het legaal voor een man in CaliforniÃ« om met de zus van zijn weduwe te trouwen?
  ];

  const $ = (id)=>document.getElementById(id);
  const answers = {};
  const earned = [];
  const solved = new Set();

  // ---- Audio (iOS: unlock via button) ----
  let audioCtx = null;
  function getCtx(){ return audioCtx || (audioCtx = new (window.AudioContext||window.webkitAudioContext)()); }
  function unlockAudio(){
    try{
      const c = getCtx();
      if(c.state === "suspended") c.resume();
      const o = c.createOscillator(), g = c.createGain();
      o.connect(g); g.connect(c.destination);
      o.frequency.value = 440; g.gain.value = 0.0001;
      o.start(); setTimeout(()=>o.stop(), 30);
    }catch(e){}
  }
  function tada(){
    try{
      const ctx = getCtx();
      const now = ctx.currentTime;

      function brass(freq, t, dur, vol){
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = "sawtooth";
        o.frequency.setValueAtTime(freq, t);

        const lfo = ctx.createOscillator();
        const lfoG = ctx.createGain();
        lfo.type = "sine";
        lfo.frequency.setValueAtTime(6.0, t);
        lfoG.gain.setValueAtTime(freq * 0.01, t);
        lfo.connect(lfoG);
        lfoG.connect(o.frequency);

        g.gain.setValueAtTime(0.0001, t);
        g.gain.exponentialRampToValueAtTime(vol, t + 0.02);
        g.gain.exponentialRampToValueAtTime(vol * 0.7, t + 0.12);
        g.gain.exponentialRampToValueAtTime(0.0001, t + dur);

        const lp = ctx.createBiquadFilter();
        lp.type = "lowpass";
        lp.frequency.setValueAtTime(2200, t);
        lp.Q.setValueAtTime(0.7, t);

        o.connect(lp); lp.connect(g); g.connect(ctx.destination);
        o.start(t); o.stop(t + dur);
        lfo.start(t); lfo.stop(t + dur);
      }

      brass(523.25, now + 0.00, 0.28, 0.12);
      brass(659.25, now + 0.12, 0.28, 0.12);
      brass(783.99, now + 0.24, 0.33, 0.13);
      brass(1046.5, now + 0.40, 0.55, 0.15);
    }catch(e){}
  }
  function buzzBad(){
    try{
      const c = getCtx();
      const o = c.createOscillator(), g = c.createGain();
      o.type = "square"; o.frequency.value = 140;
      o.connect(g); g.connect(c.destination);
      g.gain.value = 0.06;
      o.start(); setTimeout(()=>o.stop(), 160);
    }catch(e){}
  }

  // ---- Confetti ----
  const fx = $("fx");
  const fxc = fx.getContext("2d");
  let particles = [], anim = null;
  const colors = ["rgba(255,99,132,.95)","rgba(54,162,235,.95)","rgba(255,206,86,.95)","rgba(75,192,192,.95)","rgba(153,102,255,.95)","rgba(255,159,64,.95)"];

  function resizeFx(){
    fx.width = innerWidth * devicePixelRatio;
    fx.height = innerHeight * devicePixelRatio;
    fxc.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
  }
  addEventListener("resize", resizeFx); resizeFx();

  function startAnim(){
    if(anim) return;
    const tick = ()=>{
      fxc.clearRect(0,0,innerWidth,innerHeight);
      const alive = [];
      for(const p of particles){
        p.life--;
        p.x += p.vx; p.y += p.vy;
        p.vy += p.g; p.rot += p.vr;

        fxc.save();
        fxc.globalAlpha = Math.max(0, p.life/p.maxLife) * p.a;
        fxc.translate(p.x,p.y); fxc.rotate(p.rot);
        fxc.fillStyle = p.color;
        fxc.fillRect(-p.w/2, -p.h/2, p.w, p.h);
        fxc.restore();

        if(p.life>0 && p.y < innerHeight+80) alive.push(p);
      }
      particles = alive;
      if(particles.length) anim = requestAnimationFrame(tick);
      else { anim=null; fxc.clearRect(0,0,innerWidth,innerHeight); }
    };
    anim = requestAnimationFrame(tick);
  }

  function confetti(ms){
    const endAt = performance.now() + ms;
    const burst = ()=>{
      const cx = innerWidth*(0.2+Math.random()*0.6);
      const cy = innerHeight*(0.16+Math.random()*0.25);
      for(let i=0;i<120;i++){
        const ang = Math.random()*Math.PI*2;
        const sp = 1.2 + Math.random()*6.2;
        particles.push({
          x:cx,y:cy, vx:Math.cos(ang)*sp, vy:Math.sin(ang)*sp,
          g:0.08+Math.random()*0.06, w:5+Math.random()*9, h:4+Math.random()*7,
          a:1.0, life:120+Math.floor(Math.random()*60), maxLife:180,
          rot:Math.random()*Math.PI, vr:(Math.random()-0.5)*0.28,
          color: colors[Math.floor(Math.random()*colors.length)]
        });
      }
      startAnim();
    };
    burst();
    const id = setInterval(()=>{ if(performance.now()>=endAt){clearInterval(id);return;} burst(); }, 420);
  }

  // ---- UI ----
  function renderEarned(){ $("earned").textContent = earned.length ? earned.join(" ") : "â€“"; }

  function renderQuestions(){
    const host = $("questions");
    host.innerHTML = "";
    questions.forEach((q)=>{
      const done = solved.has(q.id);
      const el = document.createElement("div");
      el.className = "card";
      el.innerHTML = `
        <div class="row">
          <div class="tag">ğŸ§© ${q.title} </div>
          <div class="muted">${done ? "âœ… beantwoord" : ""}</div>
        </div>
        <p>${q.prompt.replace(/\\n/g,"<br>")}</p>
        <div class="controls">
          <input id="${q.id}_input" placeholder="Jouw antwoord" ${done ? "disabled":""} />
          <button id="${q.id}_btn" type="button" ${done ? "disabled":""}>Check</button>
          <span id="${q.id}_fb"></span>
        </div>
      `;
      host.appendChild(el);

      const input = $(q.id+"_input");
      const btn = $(q.id+"_btn");
      input.addEventListener("input", (e)=>answers[q.id]=e.target.value);
      input.addEventListener("keydown", (e)=>{ if(e.key==="Enter") submit(q); });
      btn.addEventListener("click", ()=>submit(q));
    });
  }

  function setFeedback(qid, ok, msg){
    const fb = $(qid+"_fb");
    fb.textContent = msg;
    fb.className = ok ? "ok" : "bad";
  }

  function submit(q){
    if(solved.has(q.id)) return;
    const user = (answers[q.id]||"").trim().toUpperCase();
    if(!user){ setFeedback(q.id,false,"Vul iets in."); return; }

    if(user === String(q.expected).trim().toUpperCase()){
      solved.add(q.id);
      earned.push(q.digit);
      renderEarned();
      setFeedback(q.id,true,"Goed! ğŸ‰");
      confetti(1400);
      tada();
      renderQuestions();

      if(earned.length === 4){
        startFinal();
      }
    }else{
      setFeedback(q.id,false,"Net niet. Probeer nog eens.");
      buzzBad();
    }
  }

  // ---- Finale ----
  let shuffled = [];
  let picked = [];

  function shuffle(arr){
    const a = arr.slice();
    for(let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [a[i],a[j]]=[a[j],a[i]];
    }
    return a;
  }

  function startFinal(){
    $("finalCard").style.display = "block";
    $("finalMsg").textContent = "";
    shuffled = shuffle(earned.map((v,i)=>({id:i,v})));
    picked = [];
    renderFinal();
  }

  function renderFinal(){
    const host = $("digitButtons");
    host.innerHTML = "";
    shuffled.forEach(item=>{
      const b = document.createElement("button");
      b.type="button";
      b.className="digitsBtn";
      b.textContent=item.v;
      b.disabled = picked.some(p=>p.id===item.id);
      b.addEventListener("click", ()=>pickDigit(item));
      host.appendChild(b);
    });
    $("picked").textContent = picked.map(p=>p.v).join("");
  }

  function pickDigit(item){
    if(picked.length>=4) return;
    if(picked.some(p=>p.id===item.id)) return;
    picked.push(item);
    renderFinal();

    if(picked.length===4){
      const code = picked.map(p=>p.v).join("");
      if(code === finalTargetCode){
        $("finalMsg").innerHTML = '<span class="ok">Correct! ğŸ‰</span>';
        confetti(2200);
        tada();
        $("winOverlay").classList.add("show");
      }else{
        $("finalMsg").innerHTML = '<span class="bad">Niet goed ('+code+'). Klik Opnieuw.</span>';
        buzzBad();
      }
    }
  }

  $("resetPick").addEventListener("click", ()=>{ picked=[]; $("finalMsg").textContent=""; renderFinal(); });
  $("winOverlay").addEventListener("click", (e)=>{ if(e.target.id==="winOverlay") $("winOverlay").classList.remove("show"); });

  function resetAll(){
    for(const k of Object.keys(answers)) delete answers[k];
    earned.length = 0;
    solved.clear();
    $("finalCard").style.display = "none";
    $("winOverlay").classList.remove("show");
    renderEarned();
    renderQuestions();
  }

  $("startBtn").addEventListener("click", ()=>resetAll());
  $("startSoundBtn").addEventListener("click", ()=>{ unlockAudio(); resetAll(); });

  // init
  renderEarned();
  renderQuestions();
</script>
</body>
</html>
